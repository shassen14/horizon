# packages/ml_core/configs/regime/baseline_regime.yml
model_name: "baseline_regime_rf"
description: "Random Forest classifier to detect Bull vs Bear market conditions."

data:
  kind: "regime"
  dataset_builder: "RegimeDatasetBuilder"
  target_column: "target_regime"
  start_date: "2024-01-01"
  end_date: "2025-12-31"

  feature_prefix_groups:
    - "return_"
    - "realized_vol_"
    - "vol_of_vol_"
    - "spy_minus_"
    - "qqq_minus_"
    - "credit_spread_"
    - "pct_above_"

  use_cache: true
  force_refresh: false
  cache_tag: null

  target_horizon_days: 21

model:
  type: "sklearn.ensemble.RandomForestClassifier"
  objective: "classification"
  params:
    n_estimators: 200
    max_depth: 5 # Shallow trees to prevent overfitting
    class_weight: "balanced" # Critical for handling rare Bear markets
    random_state: 42
    n_jobs: -1
  dependencies:
    - "scikit-learn"

training:
  strategy: "SklearnTrainingStrategy"
  evaluator: "ClassificationEvaluator"
  time_split_ratio: 0.8
  early_stopping_rounds: 0 # RF doesn't use early stopping
  eval_metric: "logloss" # Placeholder

backtest:
  enabled: false
  type: "regime"

  # How much you lose when switching from Cash <-> Stocks
  # 5 bps (0.05%) is reasonable for liquid ETFs like SPY
  transaction_cost_bps: 5.0

  # Starting money (Arbitrary, just for scaling the equity curve)
  initial_capital: 100000.0
